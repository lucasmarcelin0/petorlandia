{% extends "base.html" %}

{% block main %}
<div class="container py-4">
  <div class="d-flex justify-content-between align-items-center mb-4">
    <h2 class="fw-bold text-gradient mb-0">
      <i class="bi bi-calendar4-week me-2"></i> Agenda experimental
    </h2>
    <a class="btn btn-outline-primary" href="{{ url_for('appointments') }}">
      <i class="bi bi-arrow-left me-1"></i> Voltar para agenda
    </a>
  </div>

  {% set calendar_pets_endpoint = url_for('api_my_pets') %}
  {% if current_user.role == 'admin' or current_user.worker in ['veterinario', 'colaborador'] %}
    {% set calendar_pets_endpoint = url_for(
      'api_clinic_pets',
      view_as=request.args.get('view_as'),
      veterinario_id=request.args.get('veterinario_id'),
      colaborador_id=request.args.get('colaborador_id'),
      clinica_id=request.args.get('clinica_id')
    ) %}
  {% endif %}
  {% with component_id = 'tutor-calendar-page', pets_url = calendar_pets_endpoint %}
    {% include 'partials/tutor_calendar.html' %}
  {% endwith %}
</div>
{% endblock %}
