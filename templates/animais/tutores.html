{% extends 'layout.html' %}

{% block register_dependencies %}
  {{ super() }}
  {% set page_requires.tutor_search = true %}
{% endblock %}

{% block main %}
<div class="container py-4">

  <h2 class="mb-4">👥 Tutores</h2>

  <!-- 🔍 Busca de tutor -->
  <div class="card mb-4">
    <div class="card-body">
      <h5 class="card-title mb-3">🔍 Buscar Tutor</h5>
      <div data-combobox>
        <input id="busca-tutor" class="form-control" placeholder="Digite nome, e‑mail, CPF ou telefone">
        <ul id="lista-tutores" class="list-group combobox-list d-none"></ul>
      </div>
    </div>
  </div>

  <hr>

  <!-- ➕ Cadastro de novo tutor -->
  <div class="card">
    <div class="card-body">
      <h5 class="card-title mb-3">➕ Cadastrar Novo Tutor</h5>

      <form id="novo-tutor-form" method="POST" action="{{ url_for('tutores') }}" class="js-tutor-form" data-sync="true">
        <div class="row">
          <div class="mb-3 col-md-6">
            <label class="form-label">Nome</label>
            <input name="name" class="form-control" required>
          </div>
          <div class="mb-3 col-md-6">
            <label class="form-label">E‑mail</label>
            <input name="email" type="email" class="form-control" required>
          </div>
          <div class="mb-3 col-md-6">
            <label class="form-label">Telefone</label>
            <input name="phone" class="form-control">
          </div>


          <div class="mb-3 col-md-6">
            <label class="form-label">CPF</label>
            <input name="cpf" class="form-control">
          </div>
          <div class="mb-3 col-md-6">
            <label class="form-label">RG</label>
            <input name="rg" class="form-control">
          </div>

          <!-- Data e idade -->
          <div class="mb-3 col-md-6">
            <label class="form-label">Data de Nascimento</label>
            <input id="date_of_birth" name="date_of_birth" type="text" class="form-control">
          </div>
          <div class="mb-3 col-md-6">
            <label class="form-label">Idade</label>
            <input id="age" type="number" class="form-control" min="0">
          </div>
        </div>

                  
          <!-- Novo endereço com CEP -->
          <div class="col-12">
            {% include "partials/endereco_form.html" %}
          </div>

        <button class="btn btn-primary btn-lg" data-original="💾 Salvar e abrir ficha">💾 Salvar e abrir ficha</button>
      </form>
    </div>
  </div>

</div>

<div id="tutores-adicionados">
{% include 'partials/tutores_adicionados.html' %}
</div>



<!-- ✨ Flatpickr CSS & JS -->
{% endblock %}
