{% extends "layout.html" %}
{% block main %}
<div class="container mt-4">
  <h2>Estoque da Cl√≠nica {{ clinica.nome }}</h2>
  <table class="table table-striped mt-3">
    <thead>
      <tr>
        <th>Insumo</th>
        <th style="width:180px;">Quantidade</th>
        <th>Unidade</th>
      </tr>
    </thead>
    <tbody>
      {% for item in items %}
      <tr>
        <td>{{ item.name }}</td>
        <td>
          <form method="post" action="{{ url_for('update_inventory_item', item_id=item.id) }}" class="d-flex">
            {% if csrf_token %}{{ csrf_token() }}{% endif %}
            <input type="number" name="quantity" value="{{ item.quantity }}" min="0" class="form-control form-control-sm me-2">
            <button class="btn btn-sm btn-primary">Salvar</button>
          </form>
        </td>
        <td>{{ item.unit or '-' }}</td>
      </tr>
      {% else %}
      <tr>
        <td colspan="3" class="text-center">Nenhum item no estoque.</td>
      </tr>
      {% endfor %}
    </tbody>
  </table>
  <hr>
  <h4>Adicionar Item</h4>
  <form method="post">
    {{ form.hidden_tag() }}
    <div class="row g-2">
      <div class="col-md-5">{{ form.name(class="form-control", placeholder="Nome") }}</div>
      <div class="col-md-3">{{ form.quantity(class="form-control", placeholder="Quantidade") }}</div>
      <div class="col-md-2">{{ form.unit(class="form-control", placeholder="Unidade") }}</div>
      <div class="col-md-2">{{ form.submit(class="btn btn-success w-100") }}</div>
    </div>
  </form>
</div>
{% endblock %}
