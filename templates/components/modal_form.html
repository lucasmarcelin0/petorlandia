{% import 'macros/ui.html' as ui %}
{% call ui.ui_modal(modal_id, title=title, attributes={'data-modal-close': modal_id}) %}
  <div class="ui-field">
    <label for="{{ modal_id }}-nome" class="ui-label">Nome</label>
    <input type="text" id="{{ modal_id }}-nome" class="ui-input">
  </div>
  {% if extra_fields %}
    {{ extra_fields | safe }}
  {% endif %}
  <div class="d-flex justify-content-end gap-2 mt-3">
    {{ ui.ui_button('Cancelar', type='button', variant='light', extra_classes='ui-button--outline', attributes={'data-modal-close': modal_id}) }}
    {{ ui.ui_button('Salvar', type='button', variant='primary', attributes={'id': save_button_id}) }}
  </div>
{% endcall %}
<script>
function openModal(id){
  const modal = document.getElementById(id);
  if(modal){
    modal.style.display = 'flex';
  }
}
function closeModal(id){
  const modal = document.getElementById(id);
  if(modal){
    modal.style.display = 'none';
  }
}
(function(){
  document.addEventListener('click', function(event){
    const target = event.target;
    const modalId = target.dataset.modalClose;
    if(modalId){
      closeModal(modalId);
    }
    if(target.classList.contains('ui-modal')){
      closeModal(target.id);
    }
  });
})();
</script>
