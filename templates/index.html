{% extends "layout.html" %}
{% import 'macros/ui.html' as ui %}

{% block main %}
<div class="container text-center">

    {% if current_user.is_authenticated %}
        <!-- Área pessoal -->
        {% call ui.ui_card(title="Bem-vindo(a)! O que você deseja fazer hoje?", variant='muted', extra_classes='mt-5 mb-4 shadow-sm') %}
            <div class="row justify-content-center g-4">
                <!-- Lottie: Add Animal -->
                <div class="col-md-3">
                    <lottie-player src="https://assets5.lottiefiles.com/packages/lf20_ghs9bthn.json"
                                   background="transparent" speed="1" class="ui-illustration" loop autoplay></lottie-player>
                    {{ ui.ui_button('➕ Cadastrar novo animal', href=url_for('add_animal'), variant='secondary', extra_classes='shadow-sm rounded-pill', attributes={'data-bs-toggle': 'tooltip', 'title': 'Cadastre um novo animal na plataforma.'}) }}
                </div>

                <!-- Lottie: List Animals -->
                <div class="col-md-3">
                    <lottie-player src="https://assets4.lottiefiles.com/packages/lf20_qp1q7mct.json"
                                   background="transparent" speed="1" class="ui-illustration" loop autoplay></lottie-player>
                    {{ ui.ui_button('📋 Ver todos os animais', href=url_for('list_animals'), variant='primary', extra_classes='shadow-sm rounded-pill', attributes={'data-bs-toggle': 'tooltip', 'title': 'Veja todos os animais disponíveis.'}) }}
                </div>

                <!-- Lottie: Health -->
                <div class="col-md-3">
                    <lottie-player src="https://assets10.lottiefiles.com/packages/lf20_ksixj2kx.json"
                                   background="transparent" speed="1" class="ui-illustration" loop autoplay></lottie-player>
                    {{ ui.ui_button('❤️ Plano de Saúde Pet', href=url_for('plano_saude_overview'), variant='info', extra_classes='shadow-sm rounded-pill', attributes={'data-bs-toggle': 'tooltip', 'title': 'Conheça nosso plano de saúde para pets.'}) }}
                </div>

                <!-- Lottie: Store -->
                <div class="col-md-3">
                    <lottie-player src="https://assets10.lottiefiles.com/packages/lf20_sGqAqL.json"
                                   background="transparent" speed="1" class="ui-illustration" loop autoplay></lottie-player>
                    {{ ui.ui_button('🛍️ Loja Pet', href=url_for('loja'), variant='warning', extra_classes='rounded-pill shadow-sm loja-pet-filled', attributes={'data-bs-toggle': 'tooltip', 'title': 'Acesse nossa loja para encontrar tudo que seu pet precisa.'}) }}
                </div>
            </div>
        {% endcall %}
    {% else %}
        <!-- Visitante não autenticado -->
        {% call ui.ui_card(variant='surface', extra_classes='mt-5 shadow-lg') %}
            <div class="text-center">
                <img src="{{ url_for('static', filename='logo_pet.png') }}"
                     alt="Logo PetOrlândia"
                     class="mb-4 logo-img mx-auto">
            </div>

            <p class="lead">
                PetOrlândia é um espaço completo para quem ama e cuida dos animais. Aqui você pode adotar, doar, agendar atendimentos veterinários e encontrar tudo o que seu pet precisa — com carinho, responsabilidade e praticidade.
            </p>
            
            <div class="d-flex justify-content-center gap-3 mt-4 flex-wrap">
                {{ ui.ui_button('🧑 Criar Conta', href=url_for('register'), variant='secondary', extra_classes='rounded-pill') }}
                {{ ui.ui_button('🔐 Entrar', href=url_for('login_view'), variant='primary', extra_classes='rounded-pill') }}
            </div>
        {% endcall %}
    {% endif %}

    {% if current_user.is_authenticated and (current_user.worker == 'colaborador' or is_active_veterinarian) %}
    <!-- Área profissional -->
        {% call ui.ui_card(title='Área profissional', extra_classes='mb-5 shadow-lg') %}
            <div class="d-flex flex-wrap justify-content-center gap-3">
                {{ ui.ui_button('🐶 Animais', href=url_for('novo_animal'), variant='primary', extra_classes='rounded-pill shadow-sm', attributes={'data-bs-toggle': 'tooltip', 'title': 'Gerencie os animais vinculados a tutores.'}) }}

                {{ ui.ui_button('👥 Tutores', href=url_for('tutores'), variant='secondary', extra_classes='rounded-pill shadow-sm', attributes={'data-bs-toggle': 'tooltip', 'title': 'Veja os tutores cadastrados.'}) }}

                {% if current_user.worker == 'colaborador' or (is_active_veterinarian and current_user.veterinario) %}
                {{ ui.ui_button('🗓️ Agenda', href=url_for('appointments'), variant='warning', extra_classes='rounded-pill shadow-sm', attributes={'data-bs-toggle': 'tooltip', 'title': 'Administre sua agenda de atendimentos.'}) }}
                {% endif %}
            </div>
        {% endcall %}
    {% endif %}

    {% if current_user.is_authenticated and current_user.worker == 'delivery' %}
    <!-- Área de Entregas -->
        {% call ui.ui_card(title='Área de Entregas', extra_classes='mb-5 shadow-lg') %}
            <div class="d-flex flex-wrap justify-content-center gap-3">
                {{ ui.ui_button('🚚 Solicitações', href=url_for('list_delivery_requests'), variant='secondary', extra_classes='rounded-pill shadow-sm') }}
            </div>
        {% endcall %}
    {% endif %}
</div>
{% endblock %}
