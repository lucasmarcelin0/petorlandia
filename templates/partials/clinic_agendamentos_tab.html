      {% from 'components/quick_filter_macros.html' import quick_pill_group %}
      <h3 class="d-flex align-items-center gap-2">
        <span class="icon-circle bg-success text-white"><i class="fa-solid fa-calendar"></i></span>
        <span class="fw-semibold">Agendamentos</span>
      </h3>
      <div class="mb-3 text-end">
        <button class="btn btn-primary" disabled>
          <i class="fa-solid fa-list me-1"></i>Lista
        </button>
      </div>

      <div id="list-container">
        <form id="appointment-filter-form" method="get" action="{{ url_for('clinic_detail', clinica_id=clinica.id) }}" class="appointment-filter-form mb-3">
          <div class="card shadow-sm border-0 appointment-filter-card">
            <div class="card-body">
              <div class="appointment-filter-grid">
                <div class="filter-group">
                  <label class="form-label" id="period-filter-label">Período</label>
                  <div class="filter-period-inputs" role="group" aria-labelledby="period-filter-label">
                    <div class="input-group input-group-sm">
                      <span class="input-group-text">
                        <i class="fa-solid fa-calendar-day fa-sm" aria-hidden="true"></i>
                      </span>
                      <input type="date" id="start" name="start" class="form-control" value="{{ appointment_filters.start }}" aria-label="Data inicial">
                    </div>
                    <div class="input-group input-group-sm">
                      <span class="input-group-text">
                        <i class="fa-solid fa-calendar-check fa-sm" aria-hidden="true"></i>
                      </span>
                      <input type="date" id="end" name="end" class="form-control" value="{{ appointment_filters.end }}" aria-label="Data final">
                    </div>
                  </div>
                </div>
                <div class="filter-group">
                  <label for="vet_id" class="form-label">Profissional</label>
                  <select id="vet_id" name="vet_id" class="form-select">
                    <option value="">Todos os profissionais</option>
                    {% for option in appointment_vet_options %}
                    <option value="{{ option.id }}" {% if appointment_filters.vet_id == option.id|string %}selected{% endif %}>{{ option.name }}</option>
                    {% endfor %}
                  </select>
                </div>
                <div class="filter-group">
                  <label for="status" class="form-label">Status</label>
                  <select id="status" name="status" class="form-select">
                    {% for option in appointment_status_options %}
                    <option value="{{ option.value }}" {% if appointment_filters.status == option.value %}selected{% endif %}>{{ option.label }}</option>
                    {% endfor %}
                  </select>
                </div>
                <div class="filter-group">
                  <label for="type" class="form-label">Tipo</label>
                  <select id="type" name="type" class="form-select">
                    {% for option in appointment_type_options %}
                    <option value="{{ option.value }}" {% if appointment_filters.type == option.value %}selected{% endif %}>{{ option.label }}</option>
                    {% endfor %}
                  </select>
                </div>
              </div>
              <div class="d-flex flex-wrap gap-2 mt-4 justify-content-end">
                <button type="submit" class="btn btn-primary">
                  <i class="fa-solid fa-filter fa-sm me-2" aria-hidden="true"></i>
                  <span>Aplicar filtros</span>
                </button>
              </div>
            </div>
          </div>

          <div class="accordion appointment-filter-accordion mt-3" id="appointmentQuickFilters">
            <div class="accordion-item">
              <h2 class="accordion-header" id="quickFiltersHeading">
                <button class="accordion-button collapsed" type="button" data-bs-toggle="collapse" data-bs-target="#appointmentQuickFiltersCollapse" aria-expanded="false" aria-controls="appointmentQuickFiltersCollapse">
                  <i class="fa-solid fa-bolt fa-sm text-warning me-2" aria-hidden="true"></i>
                  <span>Filtros rápidos</span>
                </button>
              </h2>
              <div id="appointmentQuickFiltersCollapse" class="accordion-collapse collapse" aria-labelledby="quickFiltersHeading">
                <div class="accordion-body d-flex flex-column gap-3">
                  {{ quick_pill_group('Período rápido', appointment_quick_ranges, icon='fa-solid fa-calendar-day', variant='secondary') }}
                  {{ quick_pill_group('Status', appointment_status_quick_filters, icon='fa-solid fa-signal', variant='primary', data_variant='status') }}
                  {{ quick_pill_group('Tipo', appointment_type_quick_filters, icon='fa-solid fa-stethoscope', variant='info', data_variant='type') }}
                </div>
              </div>
            </div>
          </div>
        </form>
        <div id="appointments-table-container" data-appointments-container data-refresh-url="{{ request.url }}">
          {% include 'partials/appointments_table.html' %}
        </div>
      </div>

