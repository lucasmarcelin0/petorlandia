{% extends "layout.html" %}

{% block main %}
<div class="container my-5 d-flex justify-content-center">
  <div class="col-lg-8 bg-white shadow rounded-4 p-5 border position-relative">
    
    <div class="text-center mb-4">
      <h2 class="fw-bold mb-1">ðŸ’³ Pagamento Recebido</h2>
      <p class="text-muted">Acompanhe abaixo os detalhes da sua compra</p>
    </div>

    {% if result == 'success' %}
      <div class="alert alert-success text-center fs-5 mb-4">
        <i class="bi bi-check-circle-fill me-2"></i> Pagamento realizado com sucesso!
      </div>
    {% elif result == 'failure' %}
      <div class="alert alert-danger text-center fs-5 mb-4">
        <i class="bi bi-x-circle-fill me-2"></i> O pagamento foi recusado.
      </div>
    {% endif %}

    <div class="text-center mb-4">
      {% if payment.status.name == 'PENDING' %}
        <span class="badge bg-warning text-dark px-4 py-2 fs-6 rounded-pill">
          <i class="bi bi-hourglass-split me-1"></i> Aguardando pagamento
        </span>
      {% elif payment.status.name == 'COMPLETED' %}
        <span class="badge bg-success px-4 py-2 fs-6 rounded-pill">
          <i class="bi bi-truck me-1"></i> Pedido confirmado e sendo preparado!
        </span>
      {% else %}
        <span class="badge bg-secondary px-4 py-2 fs-6 rounded-pill">
          Status: {{ payment.status.name }}
        </span>
      {% endif %}
    </div>

    <div class="mb-3">
      <p class="mb-1"><strong>MÃ©todo de Pagamento:</strong> {{ payment.method.name }}</p>
      <p class="mb-1"><strong>ID da TransaÃ§Ã£o:</strong> {{ payment.transaction_id }}</p>
    </div>

    <div class="d-flex justify-content-center gap-3 mt-5">
      {% if payment.order_id %}
        <a href="{{ url_for('ver_pedido', pedido_id=payment.order_id) }}" class="btn btn-primary">
          <i class="bi bi-receipt me-1"></i> Acompanhar pedido
        </a>
      {% endif %}
      <a href="{{ url_for('loja') }}" class="btn btn-outline-secondary">
        <i class="bi bi-shop me-1"></i> Voltar para a loja
      </a>
    </div>
  </div>
</div>
{% endblock %}
