{% extends 'layout.html' %}
{% block main %}
<div class="container py-4">
  <h2 class="mb-4">Histórico de Entregas</h2>
  <h4>Tarefas Disponíveis</h4>
  <ul class="list-group mb-3">
    {% for r in available %}
    <li class="list-group-item d-flex justify-content-between align-items-center">
      Pedido #{{ r.order_id }}
      <form action="{{ url_for('accept_delivery', req_id=r.id) }}" method="post" class="js-delivery-form">
        <button class="btn btn-sm btn-primary">Aceitar</button>
      </form>
    </li>
    {% else %}
    <li class="list-group-item">Nenhuma tarefa disponível.</li>
    {% endfor %}
  </ul>
  <h4>Em Andamento</h4>
  <ul class="list-group mb-3">
    {% for r in doing %}
    <li class="list-group-item d-flex justify-content-between align-items-center">
      Pedido #{{ r.order_id }}
      <div>
        <form action="{{ url_for('complete_delivery', req_id=r.id) }}" method="post" class="d-inline js-delivery-form">
          <button class="btn btn-sm btn-success">Concluir</button>
        </form>
        <form action="{{ url_for('cancel_delivery', req_id=r.id) }}" method="post" class="d-inline ms-2 js-delivery-form">
          <button class="btn btn-sm btn-danger">Cancelar</button>
        </form>
      </div>
    </li>
    {% else %}
    <li class="list-group-item">Nenhum pedido em andamento.</li>
    {% endfor %}
  </ul>
  <h4>Concluídos</h4>
  <ul class="list-group mb-3">
    {% for r in done %}
    <li class="list-group-item">Pedido #{{ r.order_id }} concluído</li>
    {% else %}
    <li class="list-group-item">Nada concluído ainda.</li>
    {% endfor %}
  </ul>
  <h4>Cancelados</h4>
  <ul class="list-group">
    {% for r in canceled %}
    <li class="list-group-item">Pedido #{{ r.order_id }} cancelado</li>
    {% else %}
    <li class="list-group-item">Nenhum cancelamento registrado.</li>
    {% endfor %}
  </ul>
</div>
{% endblock %}
